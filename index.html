 <!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>羅刹王髑髏烏帽子・蘆屋道満 — 闇ノ御座</title>
<meta name="description" content="黒×紅の蘆屋道満(Fate)風サイト。式神が漂い、占いで判じる。">
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700;900&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --ink:#0a0a0c; --coal:#0d0d11;
  --blood:#b20816; --crimson:#e0112b; --edge:#520711;
  --mist:#d0cfd6;
  --glow:0 0 .8rem #e0112b88,0 0 1.6rem #b2081680,0 0 0 1px #300;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:#eee; font-family:"Noto Serif JP",serif; letter-spacing:.02em;
  background:
    radial-gradient(1400px 900px at 15% -10%, #33000d55, transparent 50%),
    radial-gradient(1400px 900px at 85% -10%, #3c001055, transparent 50%),
    linear-gradient(#050507, #09090d 60%, #050507);
  overflow-x:hidden;
}

/* 枠 */
.frame{position:fixed; inset:0; pointer-events:none; z-index:1;
  box-shadow: inset 0 0 0 2px var(--edge), inset 0 0 40px #000;
}
.frame::before,.frame::after{
  content:""; position:absolute; inset:10px;
  border:1px solid #21040a; box-shadow:inset 0 0 18px #000;
}

/* ヘッダー */
header{position:relative; z-index:2; padding:18px clamp(14px,5vw,48px);
  display:flex; align-items:center; justify-content:space-between; gap:16px;}
.brand{display:flex; align-items:center; gap:12px; text-decoration:none; color:#fff}
.brand .crest{width:42px; height:42px; border-radius:50%;
  background:radial-gradient(circle at 40% 40%, var(--crimson), var(--blood) 60%, #000 70%);
  box-shadow:var(--glow), inset 0 0 12px #000;}
.brand .title{font-family:"Cinzel",serif; letter-spacing:.12em; text-transform:uppercase}
nav a{color:#dcd7dd; text-decoration:none; margin-left:12px; padding:6px 10px; border-radius:4px}
nav a:hover{color:#fff; text-shadow:var(--glow)}

/* ヒーロー */
.hero{position:relative; z-index:2; padding:8vh clamp(16px,5vw,64px) 14vh}
h1{font-size:clamp(30px,6vw,64px); line-height:1.2; margin:8vh 0 8px; text-shadow:var(--glow)}
.lead{max-width:65ch; color:#d8d3da; opacity:.95; font-size:clamp(15px,2.2vw,18px)}
.cta{margin-top:22px; display:flex; gap:12px; flex-wrap:wrap}
.btn{background:linear-gradient(180deg,var(--crimson),var(--blood));
  border:1px solid var(--edge); color:#fff; padding:12px 18px; border-radius:8px;
  text-decoration:none; box-shadow:var(--glow)}
.btn.alt{background:#121216; border-color:#3a0911}
.btn:hover{filter:brightness(1.1)}

/* 漂う式神 */
.shiki{position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden}
.shiki img{position:absolute; width:60px; opacity:.09; filter:drop-shadow(0 0 6px #e0112b33);
  animation:float linear infinite}
@keyframes float{
  from{transform:translateY(110vh) rotate(0deg)}
  to{transform:translateY(-20vh) rotate(360deg)}
}

/* セクション */
section{position:relative; z-index:2; padding:80px clamp(16px,5vw,64px);
  background:linear-gradient(180deg, transparent, #00000010 22%, transparent);
  border-top:1px solid #160308}
h2{font-size:clamp(22px,4.2vw,34px); margin:0 0 16px; text-shadow:var(--glow)}
.card{background:radial-gradient(120% 120% at 20% 0%, #170007, #0b0b10);
  border:1px solid #2a0a11; border-radius:12px; padding:20px; box-shadow:0 10px 30px #000 inset, var(--glow)}

/* 占いフォーム */
.form{display:grid; gap:12px; max-width:700px}
label{font-size:14px; color:#cfc7cf}
input,select,button,textarea{
  font:inherit; color:#eee; background:#0d0d12; border:1px solid #2a0a11;
  padding:10px 12px; border-radius:8px; outline:none}
input:focus,select:focus,textarea:focus{box-shadow:var(--glow)}
button{cursor:pointer; background:linear-gradient(180deg,#1a0006,#110006)}
button.primary{background:linear-gradient(180deg,var(--blood),#7a0612)}
.result{margin-top:14px; white-space:pre-wrap; background:linear-gradient(180deg,#0d0d11,#0b0b0f);
  border:1px solid #2a0a11; border-radius:10px; padding:16px}

/* ギャラリー */
.grid{display:grid; gap:14px; grid-template-columns:repeat(auto-fit, minmax(200px,1fr))}
.tile{aspect-ratio:1/1; border-radius:10px; overflow:hidden; position:relative;
  border:1px solid #2a0a11; background:#0b0b0f}
.tile::before{content:""; position:absolute; inset:0;
  background-image:url('https://i.postimg.cc/8kL17ng2/IMG-5855.png');
  background-size:contain; background-repeat:no-repeat; background-position:center;
  filter:drop-shadow(0 0 10px #e0112b44); opacity:.23}
.tile span{position:absolute; inset:auto 0 0 0; padding:10px 12px;
  background:linear-gradient(180deg, transparent, #000000aa); font-size:14px; color:#dad2d6}

/* フッター */
footer{padding:40px 24px; text-align:center; color:#aaa; border-top:1px solid #160308}
small{color:#7f767b}
kbd{background:#1a1a22; border:1px solid #333; padding:2px 6px; border-radius:4px}

@media (prefers-reduced-motion: reduce){ .shiki img{animation:none} }
</style>
</head>
<body>
<div class="frame" aria-hidden="true"></div>

<header>
  <a class="brand" href="#top" aria-label="トップへ">
    <div class="crest" aria-hidden="true"></div>
    <div class="title">Ashiya Doman</div>
  </a>
  <nav>
    <a href="#about">由緒</a>
    <a href="#uranai">占い</a>
    <a href="#gallery">式神</a>
  </nav>
</header>

<!-- 浮遊する式神 -->
<div class="shiki" aria-hidden="true" id="shikiLayer"></div>

<main id="top" class="hero" role="main">
  <h1>羅刹王髑髏烏帽子、蘆屋道満の御座へ──</h1>
  <p class="lead">
    ンンンン……よくぞ来たもの。拙僧が張る黒紅の結界、ここは迷える者に吉凶を示す
    <ruby>禍福反転<rt>かふくへんてん</rt></ruby>の間。さぁマスター、魂の帳面を開こうではありませぬか。
  </p>
  <div class="cta">
    <a class="btn primary" href="#uranai">占いを受ける</a>
    <a class="btn alt" href="#gallery">式神を見る</a>
  </div>
</main>

<section id="about" aria-labelledby="about-h">
  <h2 id="about-h">由緒・口上</h2>
  <div class="card">
    <p>
      拙僧、蘆屋道満。陰陽の縒りを撚り、吉兆を喰らい凶兆を煮詰めて蜜と成す者。
      ここでは言霊・数・星の三相をもって相を断ち、「救い」と「試練」を同時に授け申す。
      ンンンン……覚悟はよろしいかな、マスター。
    </p>
  </div>
</section>

<section id="uranai" aria-labelledby="uranai-h">
  <h2 id="uranai-h">道満の占い帳</h2>
  <div class="card">
    <form class="form" id="form">
      <div>
        <label for="name">御名（任意）</label>
        <input id="name" name="name" autocomplete="name" placeholder="蘆屋道満 など">
      </div>
      <div>
        <label for="birth">生まれ（任意）</label>
        <input id="birth" name="birth" type="date">
      </div>
      <div>
        <label for="focus">占術の焦点</label>
        <select id="focus" name="focus">
          <option value="総合">総合</option>
          <option value="恋愛">恋愛</option>
          <option value="仕事">仕事</option>
          <option value="金運">金運</option>
          <option value="学業">学業</option>
          <option value="縁・相性">縁・相性</option>
        </select>
      </div>
      <div>
        <button class="primary" type="submit">ンンンン…判じ申す</button>
        <button type="button" id="copyBtn" title="結果をコピー"><kbd>Copy</kbd></button>
      </div>
      <output class="result" id="result" aria-live="polite"></output>
    </form>
  </div>
</section>

<section id="gallery" aria-labelledby="gallery-h">
  <h2 id="gallery-h">式神見本市</h2>
  <p style="margin:0 0 12px;color:#cfc7cf">
    散りばめの原図：
    <a href="https://i.postimg.cc/8kL17ng2/IMG-5855.png" target="_blank" rel="noopener">この式神</a>
  </p>
  <div class="grid" role="list">
    <figure class="tile" role="listitem"><span>紅焔ノ式</span></figure>
    <figure class="tile" role="listitem"><span>骸骨傘ノ式</span></figure>
    <figure class="tile" role="listitem"><span>冥烏帽子ノ式</span></figure>
    <figure class="tile" role="listitem"><span>地縛炎ノ式</span></figure>
  </div>
</section>

<footer>
  <div>© 蘆屋道満 — ンンンン……おかわりはまた明晩。</div>
  <small>ダークテーマ。視覚効果は <code>prefers-reduced-motion</code> に配慮済み。</small>
</footer>

<script>
/* === 漂う式神を生成 === */
(function spawnShikigami(){
  const layer = document.getElementById('shikiLayer');
  const SRC = 'https://i.postimg.cc/8kL17ng2/IMG-5855.png';
  const N = Math.min(28, Math.max(12, Math.floor(window.innerWidth/50)));
  for(let i=0;i<N;i++){
    const img = new Image();
    img.src = SRC; img.alt = ""; img.setAttribute("aria-hidden","true");
    img.style.left = (Math.random()*100)+'vw';
    img.style.animationDuration = (18 + Math.random()*26) + 's';
    img.style.animationDelay = (-Math.random()*20) + 's';
    img.style.transform = `translateY(${(20+Math.random()*90)}vh)`;
    img.style.width = (36 + Math.random()*72) + 'px';
    layer.appendChild(img);
  }
})();

/* === 占いエンジン（日付・名前・焦点で決定） === */
function hashStr(s){
  let h = 1779033703 ^ s.length;
  for(let i=0;i<s.length;i++){ h = Math.imul(h ^ s.charCodeAt(i), 3432918353); h = (h<<13) | (h>>>19); }
  return (h>>>0);
}
function pick(seed, arr){ return arr[ seed % arr.length ]; }

const OMIKUJI = [
  "大吉──黒雲裂け、紅き道が拓ける。躊躇うな、今宵が号令。",
  "中吉──灯は点る。足下の塵を払えば道は続く。",
  "小吉──焦らず一献。実りは薄くとも傷は浅い。",
  "吉──静かな追い風。言は少なに、働きを多くせよ。",
  "半吉──良し悪し半ば。選ぶなら汝の矜持に従え。",
  "末吉──芽は固し。夜更かしを減らし体を調えよ。",
  "凶──ンンンン……欲が先走る。約束と節制を守れ。",
  "大凶──試練来る。だが恐れるな、試練は刃を研ぐ砥石なり。"
];
const ADVICE = {
  "総合":[ "古傷を舐めず、学を糧に替えよ。","朝の一歩を早めよ、縁が巡る。","過去の荷を三つ捨てよ──物・予定・愚痴。" ],
  "恋愛":[ "声を半音下げ、言葉を半分に。相手の間合いを視よ。","贈り物は小さく赤い物を。三日以内に。" ],
  "仕事":[ "締切を祀れ。可視化こそ護符。","敵は人にあらず、通知だ。切れ。" ],
  "金運":[ "財布を北に休ませよ。出費の鬼気、鎮まる。","定額の自動化を一つ増やせ。未来が礼を言う。" ],
  "学業":[ "声に出して覚えよ。舌に刻めば忘れにくい。","25分刻みで区切れ。砂時計は偉い。" ],
  "縁・相性":[ "似た者より補う者を求めよ。","三度会って笑うなら相、二度で沈むなら非。" ]
};
const EXTRA = [
  "式神の囁き：赤き布を身につければ厄が逸れる。",
  "呪障注意：水を怠るな。杯三度、昼までに。",
  "星位変更：今週は『断つ』が吉。要らぬ通知・物・縁を処すべし。"
];

const form = document.getElementById('form');
const result = document.getElementById('result');
form.addEventListener('submit', (e)=>{
  e.preventDefault();
  const name  = (document.getElementById('name').value || "名無し").trim();
  const birth = (document.getElementById('birth').value || "0000-00-00").trim();
  const focus = document.getElementById('focus').value;
  const seed  = hashStr(name + "|" + birth + "|" + focus);

  const omen = pick(seed, OMIKUJI);
  const msg1 = pick(seed>>3, ADVICE[focus] || ADVICE["総合"]);
  const msg2 = pick(seed>>5, EXTRA);
  const chant = "ン".repeat(3 + (seed % 4)) + "……";

  const header = `【判辞】${omen}\n`;
  const body   = `【指針】${msg1}\n【付記】${msg2}\n`;
  const sign   = `【口上】${chant}拙僧・蘆屋道満、これにて相定めたり。`;

  result.textContent = [header, body, sign].join("\n");
});

/* コピー */
document.getElementById('copyBtn').addEventListener('click', async ()=>{
  try{
    await navigator.clipboard.writeText(result.textContent || "");
    const prev = result.textContent;
    result.textContent = (prev?prev+"\n":"") + "（結果を写本した。貼付の儀は任せたぞ、マスター）";
  }catch(e){
    alert("コピーできませんでした。選択して手動でどうぞ。");
  }
});
</script>
</body>
</html>
